# FOMS 개발 건강 진단 보고서 (GDM 감사)

> **실행일**: 2026-02-19  
> **기준**: Grand Develop Master 감사 항목 (코드 품질·파일 크기·아키텍처·보안·성능)

---

## 요약

| 항목 | 2026-02-18 | 2026-02-19 |
|------|------------|------------|
| **전체 점수** | 72/100 | **80/100** |
| **긴급 조치 필요** | 0건 | 0건 |
| **개선 권장** | 6건 | 4건 |
| **양호** | 8건 | 12건 |

---

## 긴급 (🔴)

- **없음.**  
  당장 서비스 중단·보안 사고로 이어질 만한 항목은 없습니다.

---

## 개선 권장 (🟡)

1. **Python 500줄 초과 파일**  
   - `apps/api/chat/routes.py`, `apps/api/wdcalculator.py`, `services/erp_policy.py`, `apps/api/erp_map.py` 등은 500줄 근접·초과.  
   - **효과**: 점진적으로 모듈 분리 시 유지보수 용이.  
   - **참고**: `order_pages.py`는 445줄로 목표 달성.

2. **테스트 확대**  
   - 스모크 3건 통과 상태. 핵심 API·주문 상태 변경 경로에 pytest를 단계적으로 추가 권장.  
   - **효과**: 리팩터링·배포 시 회귀 방지.

3. **N+1 쿼리 검토**  
   - 대시보드 목록 조회 시 루프 내 추가 조회가 있으면 `joinedload`/`selectinload` 검토.

4. **입력 검증 보강**  
   - 검색어 길이·특수문자 제한 등 간단한 검증 추가 시 보안·안정성 향상.

---

## 양호 (🟢)

1. **app.py·erp.py** — app 317줄, erp 39줄 (목표 달성).
2. **Blueprint·서비스 분리** — ERP·주문 API 역할별 분리, services/ 정리.
3. **대형 템플릿 partial** — calculator, erp_construction, erp_production 분리 완료 (NEXT-002).
4. **pytest 도입** — tests/, 스모크 3건 (NEXT-003).
5. **db_admin 환경변수화** — FOMS_ADMIN_DEFAULT_PASSWORD (NEXT-004).
6. **SECRET_KEY** — 환경변수 사용, 프로덕션 미설정 시 에러.
7. **SQL 삽입** — ORM 중심, text() 제한적 사용.
8. **백업/복원** — 주문·상태·structured_data 포함 문서화.
9. **아키텍처 일관성** — apps/api/, apps/erp_*.py, services/ 패턴 유지.
10. **배포 노트** — DEPLOY_NOTES.md 정리.
11. **order_pages** — 445줄(500줄 이하).
12. **GDM 문제 해결 프로토콜** — 단순화 우선·시간 차원 인지 룰 반영.

---

## 다음 액션 (우선순위)

| 순서 | 작업 | 비고 |
|------|------|------|
| 1 | **Phase 3 테스트 확대** | 스모크 외 API·주문 상태 변경 1~2건 추가 후 CI 검토 |
| 2 | 500줄 초과 Python 파일 점진 분리 | erp_policy, wdcalculator, chat/routes 등 |
| 3 | N+1·입력 검증 | 필요 시 joinedload, 검색어 검증 |

---

*이 보고서는 GDM “개발 품질 감사” 결과입니다. 2026-02-19 코드베이스 기준.*
