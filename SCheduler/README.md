# 🧠 지능형 주소 변환 시스템

AI 학습 기능을 탑재한 차세대 주소 변환 시스템! Excel 파일에서 주소를 읽어와 카카오맵 API를 사용하여 좌표로 변환하고, 실패한 주소는 AI가 학습하여 정확도를 지속적으로 향상시킵니다.

## 🎯 주요 기능

### 📊 기본 기능
- **Excel 파일 업로드**: .xlsx 파일 지원
- **자동 컬럼 감지**: 주소/날짜 컬럼 자동 인식  
- **날짜 기반 필터링**: Excel의 날짜 컬럼으로 데이터 필터링
- **주소 → 좌표 변환**: 카카오맵 API 사용
- **대화형 지도 표시**: Folium으로 마커 표시
- **결과 다운로드**: 변환 결과를 Excel로 다운로드

### 🧠 AI 지능 기능
- **학습형 주소 변환**: 사용자 수정 데이터를 학습하여 정확도 향상
- **스마트 전처리**: 주소 패턴 분석 및 자동 정규화
- **웹 패턴 학습**: 인터넷 검색을 통한 주소 패턴 학습
- **AI 수정 제안**: 실패한 주소에 대한 지능형 제안
- **일괄 자동 수정**: 다양한 AI 옵션으로 일괄 재변환
- **학습 대시보드**: 실시간 AI 학습 현황 모니터링

## 🏗️ 시스템 구조

```
project/
├── main_app.py              # 🎯 메인 Streamlit 애플리케이션
├── address_converter.py     # 🔄 AI 통합 주소 변환 로직
├── address_learning.py      # 🧠 AI 학습 시스템
├── address_editor.py        # ✏️ 인터랙티브 주소 편집기
├── web_address_learner.py   # 🌐 웹 기반 주소 패턴 학습
├── map_generator.py         # 🗺️ 지도 생성 로직 (Folium)
├── config.py               # ⚙️ 설정 파일 (API 키, 상수)
├── requirements.txt        # 📦 의존성 패키지
└── README.md              # 📖 사용 가이드
```

## 🛠️ 설치 및 실행

### 1. 필수 요구사항

- Python 3.8 이상
- 인터넷 연결 (카카오 API 사용)

### 2. 의존성 설치

```bash
pip install -r requirements.txt
```

### 3. 애플리케이션 실행

```bash
streamlit run main_app.py
```

기본적으로 http://localhost:8501 에서 실행됩니다.

포트를 변경하려면:
```bash
streamlit run main_app.py --server.port 8503
```

## 📖 사용 방법

### 1단계: Excel 파일 준비
- 주소 정보가 포함된 .xlsx 파일 준비
- 선택사항: 날짜 컬럼 포함 (날짜별 필터링 가능)

### 2단계: 파일 업로드
1. 웹 브라우저에서 애플리케이션 접속
2. "Excel 파일을 선택하세요" 버튼으로 파일 업로드
3. 업로드된 데이터 미리보기 확인

### 3단계: 컬럼 선택
1. 주소 컬럼 선택 (자동 감지된 컬럼 우선 표시)
2. 날짜 컬럼이 있는 경우 선택

### 4단계: 날짜 필터링 (선택사항)
1. 날짜 범위 확인
2. 변환할 특정 날짜 선택
3. 필터링된 데이터 확인

### 5단계: AI 주소 변환
1. "주소 변환 시작" 버튼 클릭
2. AI 전처리 및 진행률 확인
3. 변환 결과 통계 확인

### 6단계: 실패 주소 AI 수정 🧠
1. **개별 수정**: AI 제안 선택 또는 직접 입력
2. **일괄 수정**: 자동 수정 옵션으로 일괄 재변환
3. **AI 학습**: 수정 내용이 자동으로 학습됨

### 7단계: 최종 결과 확인
1. 통합된 최종 결과 테이블 확인
2. 업데이트된 지도에서 모든 위치 확인
3. 최종 결과를 Excel 파일로 다운로드

### 8단계: AI 학습 현황 모니터링 📊
1. 학습된 패턴 수 확인
2. 수정 사례 통계 확인
3. AI 성능 향상 모니터링

## 🎨 화면 구성

### 메인 화면
- 📍 제목 및 프로세스 흐름 표시
- 단계별 진행 가이드
- 파일 업로드 영역

### 결과 화면
- 📊 변환 통계 (성공률, 성공 건수)
- 📋 결과 데이터 테이블
- 🗺️ 인터랙티브 지도
- 🔍 오류 분석

## 📋 지원 형식

### Excel 파일
- **형식**: .xlsx (Excel 2007 이상)
- **인코딩**: UTF-8 권장
- **크기**: 제한 없음 (단, 메모리 용량에 따라 처리 시간 증가)

### 주소 형식
- **도로명주소**: "서울특별시 강남구 테헤란로 123"
- **지번주소**: "서울특별시 강남구 역삼동 123-45"
- **간단한 주소**: "강남구청", "서울역" 등

### 날짜 형식
- 다양한 날짜 형식 자동 인식
- Excel 날짜 형식, 문자열 날짜 모두 지원

## ⚠️ 주의사항

### API 제한
- 카카오 API 일일 호출 제한량 확인 필요
- 대량 데이터 처리 시 시간 소요
- 네트워크 불안정 시 재시도 로직 작동

### 성능 고려사항
- **권장**: 1회 처리 시 1000개 이하 주소
- **메모리**: 대용량 파일 시 충분한 RAM 필요
- **속도**: 주소당 약 0.1-1초 소요

### 데이터 정확성
- **초기 변환 성공률**: 60-80% (주소 정확성에 따라)
- **AI 학습 후 성공률**: 85-95% (사용할수록 향상)
- **좌표 기준**: WGS84 기준
- **유효 범위**: 한국 영토 내 좌표만 유효
- **학습 데이터**: 로컬 저장으로 개인정보 안전

## 🔧 설정 변경

### API 키 변경
`config.py` 파일에서 카카오 API 키 수정:
```python
KAKAO_REST_API_KEY = "YOUR_API_KEY_HERE"
```

### 기본 설정 변경
```python
# 지도 중심점 (서울)
DEFAULT_CENTER = [37.5665, 126.9780]

# API 재시도 횟수
MAX_RETRIES = 3

# API 요청 간격 (초)
DELAY_BETWEEN_REQUESTS = 0.1

# 좌표 유효 범위 (한국)
MIN_LAT, MAX_LAT = 33.0, 39.0
MIN_LNG, MAX_LNG = 124.0, 132.0
```

## 🧠 AI 학습 시스템 상세

### 학습 데이터 관리
- **저장 위치**: `address_learning_data.json` (로컬 파일)
- **학습 내용**: 원본 주소 → 수정된 주소 → 성공 좌표
- **패턴 추출**: 시/도/구/동/로/길 등 행정구역 패턴
- **유사도 계산**: Levenshtein 거리 기반 문자열 유사도

### AI 제안 알고리즘
1. **유사 사례 검색**: 기존 수정 사례에서 유사한 주소 찾기
2. **패턴 매칭**: 학습된 주소 패턴 적용
3. **웹 패턴 분석**: 정규식 기반 주소 구조 분석
4. **랜드마크 인식**: 유명 건물/지하철역 자동 인식
5. **신뢰도 평가**: 각 제안의 신뢰도 점수 계산

### 자동 수정 옵션
- **학습된 패턴 적용**: 기존 수정 사례 기반 자동 수정
- **시/도명 확장**: 축약어를 정식 명칭으로 확장
- **띄어쓰기 정규화**: 불규칙한 띄어쓰기 정리
- **웹 패턴 분석**: 인터넷 주소 패턴 적용
- **랜드마크 인식**: 유명 장소 자동 변환

## 🐛 문제 해결

### 일반적인 오류

**1. 파일 업로드 실패**
- Excel 파일 형식 확인 (.xlsx)
- 파일 크기 및 메모리 확인
- 파일 권한 확인

**2. 주소 변환 실패**
- 인터넷 연결 확인
- API 키 유효성 확인
- 주소 형식 정확성 확인

**3. 지도 표시 안됨**
- 성공한 좌표 데이터 존재 여부 확인
- 브라우저 JavaScript 활성화 확인

### 오류 메시지 해석

**기본 오류:**
- **"빈 주소"**: 주소 컬럼이 비어있음
- **"API 오류: 401"**: API 키 오류
- **"주소를 찾을 수 없음"**: 카카오 DB에 없는 주소
- **"좌표 범위 초과"**: 한국 외 지역 좌표
- **"변환 오류"**: 네트워크 또는 기타 오류

**AI 학습 관련:**
- **"수정 후 성공"**: 사용자 수정을 통해 변환 성공
- **"자동 수정 성공"**: AI 자동 수정을 통해 변환 성공
- **"학습 데이터 추가"**: 새로운 패턴이 AI에 학습됨

## 📝 라이선스

이 프로젝트는 MIT 라이선스를 따릅니다.

## 🔗 관련 링크

- [카카오 로컬 API 문서](https://developers.kakao.com/docs/latest/ko/local/dev-guide)
- [Streamlit 문서](https://docs.streamlit.io/)
- [Folium 문서](https://python-visualization.github.io/folium/)

---

**📞 문의사항이나 버그 리포트는 이슈로 등록해 주세요.** 