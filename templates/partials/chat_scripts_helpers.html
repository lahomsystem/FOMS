// textarea 자동 높이 조절 함수 (채널톡 스타일)
function autoResizeTextarea(textarea) {
    if (!textarea) return;
    // 높이 초기화
    textarea.style.height = 'auto';
    // scrollHeight로 내용 높이 계산
    const scrollHeight = textarea.scrollHeight;
    // 최소 38px, 최대 120px로 제한
    const newHeight = Math.max(38, Math.min(scrollHeight, 120));
    textarea.style.height = newHeight + 'px';
}

// 채팅 페이지 높이 동적 계산 (반응형)
function adjustChatPageHeight() {
    const header = document.querySelector('header');
    const nav = document.querySelector('nav.navbar');
    
    if (header && nav) {
        const headerHeight = header.offsetHeight || 0;
        const navHeight = nav.offsetHeight || 0;
        const totalHeight = headerHeight + navHeight;
        
        // 바깥 container-fluid(header 포함)만 높이 제한 — 채팅 입력창 하단 고정을 위한 루트
        const outerContainer = document.querySelector('body .container-fluid:has(header)');
        if (outerContainer && document.querySelector('.chat-page-wrapper')) {
            outerContainer.style.height = `calc(100vh - ${totalHeight}px)`;
            outerContainer.style.maxHeight = `calc(100vh - ${totalHeight}px)`;
            outerContainer.style.overflow = 'hidden';
            outerContainer.style.display = 'flex';
            outerContainer.style.flexDirection = 'column';
        }
    }
}
